# デザイン要件書: 3世代つながる認知症予防アプリ「脳活ファミリー」

> **ドキュメントバージョン**: 1.0.0
> **作成日**: 2026-02-15
> **Phase**: 1 - 要件定義
> **ステータス**: Draft
> **関連文書**: [機能要件書](./requirements.md) | [非機能要件書](./non-functional.md)

---

## 目次

1. [美的方向性](#1-美的方向性)
2. [カラーパレット](#2-カラーパレット)
3. [タイポグラフィ](#3-タイポグラフィ)
4. [アイコン・イラスト・キャラクター](#4-アイコンイラストキャラクター)
5. [アニメーション・モーション](#5-アニメーションモーション)
6. [レイアウト・スペーシング](#6-レイアウトスペーシング)
7. [UIモード（3世代対応）](#7-uiモード3世代対応)
8. [コンポーネント方針](#8-コンポーネント方針)
9. [グラフ・チャート](#9-グラフチャート)
10. [アクセシビリティ](#10-アクセシビリティ)
11. [品質基準](#11-品質基準)
12. [禁止パターン（Anti-Patterns）](#12-禁止パターンanti-patterns)

---

## 1. 美的方向性

### 1.1 トーン

**warm-friendly**（温かみ・やさしさ・信頼感）

このアプリのデザインは「おばあちゃんの家に遊びに来たときの安心感」を視覚的に表現する。
柔らかい光が差し込む居間のような温もりをスクリーン上に再現し、3世代すべてが「ここにいると安心する」と感じられるUI空間を構築する。

### 1.2 ムード

明るく楽しいが、落ち着きもある。子供っぽすぎず、堅すぎない。

| 要素 | 方向性 | 避けるべき印象 |
|------|--------|-------------|
| 楽しさ | ゲーム的達成感、キャラクターによる励まし | ガチャガチャしたゲーム感 |
| 温かさ | 手書き風要素、丸みのあるUI、暖色系 | 冷たいフラットデザイン |
| 信頼感 | 一貫したデザインシステム、洗練されたレイアウト | 安っぽいクリップアート風 |
| 落ち着き | 十分な余白、穏やかな配色、静かなアニメーション | 派手すぎる配色・過剰な動き |

### 1.3 差別化

**「医療っぽくない楽しい健康アプリ」**

既存のヘルスケアアプリが持つ堅苦しさ（白衣のイメージ、無機質なグラフ、冷たいUI）を完全に排除し、ゲーム感覚の楽しさと医学的信頼性を両立させる。ユーザーが毎日開きたくなる「温かい居場所」としてのアプリ体験を実現する。

**忘れられない一つのこと**: 「家族みんなの笑顔が見えるアプリ」

### 1.4 参照トーン

| 参照 | 取り入れる要素 | 取り入れない要素 |
|------|-------------|---------------|
| Nintendo | 親しみやすさ、世代を超えた楽しさ、直感的操作 | ゲーム的な競争の激しさ |
| LINE | 温かいコミュニケーション、スタンプ的表現、家族感 | ビジネス機能の複雑さ |
| Apple Health | データの信頼感、洗練されたグラフ、クリーンなレイアウト | 無機質さ、冷たい色調 |
| Duolingo | ゲーミフィケーション、キャラクター活用、達成感の演出 | 過度なプッシュ通知の圧 |

---

## 2. カラーパレット

### 2.1 ブランドカラー

```
Primary    : #3D8B5F   温かみのあるフォレストグリーン（生命力・健康・安心感）
Secondary  : #E8845C   やさしいコーラル（活力・温かさ・励まし）
Accent     : #F2C94C   明るいイエロー（希望・ポジティブ・達成感）
```

### 2.2 セマンティックカラー

| 用途 | Light Mode | Dark Mode | 意味 |
|------|-----------|-----------|------|
| 成功 | `#5BA97B` | `#6DBF8B` | 柔らかいグリーン。テスト正解、達成時 |
| 注意 | `#E8A85C` | `#F0B86C` | やさしいオレンジ。見逃さないで欲しい情報 |
| 情報 | `#5B9BD5` | `#6CAAE0` | 穏やかなブルー。ヒント、補足情報 |
| 危険 | `#E8845C` | `#F09070` | コーラル（赤は使用禁止）。エラー、要注意 |

> **重要**: エラーや警告に赤色 (`#FF0000` 系) を使用しない。シニアユーザーに不安・恐怖を与えるため、コーラル/オレンジ系で代替する。

### 2.3 背景・サーフェスカラー

| 要素 | Light Mode | Dark Mode |
|------|-----------|-----------|
| Background (base) | `#FBF8F3` クリーム | `#1A2332` ダークネイビー |
| Background (elevated) | `#FFFFFF` | `#243447` |
| Surface (card) | `#FFFFFF` | `#2A3F55` |
| Surface (hover) | `#F5F0E8` | `#314A63` |
| Surface (active) | `#EDE7DB` | `#3A5571` |
| Overlay | `rgba(26, 35, 50, 0.4)` | `rgba(0, 0, 0, 0.6)` |

### 2.4 テキストカラー

| 要素 | Light Mode | Dark Mode |
|------|-----------|-----------|
| Text (primary) | `#2C3E2D` ダークグリーン | `#F0EDE6` |
| Text (secondary) | `#6B7C6C` | `#A8B8C8` |
| Text (tertiary) | `#9BA89C` | `#7A8A9A` |
| Text (disabled) | `#C4CEC5` | `#4A5A6A` |
| Text (inverse) | `#FFFFFF` | `#1A2332` |

### 2.5 世代別アクセントカラー

各世代のプロフィール・スコア表示に使用する識別カラー。

| 世代 | カラー | Hex | 用途 |
|------|--------|-----|------|
| シニア世代 | 落ち着いたティール | `#4A9E8E` | プロフィール枠、スコアハイライト |
| 親世代 | 穏やかなブルー | `#5B8DC9` | プロフィール枠、スコアハイライト |
| 子供・孫世代 | 明るいコーラルピンク | `#E88E7A` | プロフィール枠、スコアハイライト |

### 2.6 コントラスト比要件

| モード | 最低コントラスト比 | 対象 |
|--------|------------------|------|
| 通常モード | 4.5:1 | 本文テキスト |
| 通常モード | 3:1 | 大きなテキスト (18px以上), UIコンポーネント |
| シニアモード | 7:1 | すべてのテキスト |
| シニアモード | 4.5:1 | UIコンポーネント |

### 2.7 ダークモード方針

- Tailwind `dark:` prefix による実装
- CSS Custom Properties でカラートークンを管理
- システム設定に自動追従 (`prefers-color-scheme`)
- 手動切替も可能（設定画面）
- ダークモード時もコントラスト比要件を満たすこと
- ダークモードの背景は真っ黒 (`#000000`) を避け、ダークネイビー系で温かみを維持

---

## 3. タイポグラフィ

### 3.1 フォントファミリー

| 用途 | フォント | フォールバック | Google Fonts |
|------|---------|-------------|-------------|
| 見出し (日本語) | Zen Maru Gothic | "Hiragino Maru Gothic ProN", sans-serif | Yes |
| 見出し (英数字) | Nunito | "Hiragino Maru Gothic ProN", sans-serif | Yes |
| 本文 (日本語) | Noto Sans JP | "Hiragino Kaku Gothic ProN", sans-serif | Yes |
| 本文 (英数字) | Nunito Sans | "Hiragino Kaku Gothic ProN", sans-serif | Yes |
| 数値・スコア | Nunito | monospace | Yes |

> **選定理由**: Zen Maru Gothic は丸みのある温かいゴシック体で、シニアにも親しみやすい。Nunito は丸みのある欧文フォントで Zen Maru Gothic と調和する。

### 3.2 フォントウェイト

| 用途 | ウェイト | 使用場面 |
|------|---------|---------|
| Regular | 400 | 本文テキスト |
| Medium | 500 | 強調テキスト、ラベル |
| SemiBold | 600 | 小見出し、ボタンテキスト |
| Bold | 700 | 見出し、スコア表示 |
| ExtraBold | 800 | ヒーローテキスト、達成表示 |

### 3.3 タイプスケール

#### 通常モード

| レベル | サイズ | 行間 | ウェイト | 用途 |
|--------|-------|------|---------|------|
| Display | 2.5rem (40px) | 1.2 | 800 | ヒーロー、達成画面 |
| H1 | 2rem (32px) | 1.3 | 700 | ページタイトル |
| H2 | 1.5rem (24px) | 1.4 | 700 | セクション見出し |
| H3 | 1.25rem (20px) | 1.4 | 600 | カード見出し |
| H4 | 1.125rem (18px) | 1.5 | 600 | サブ見出し |
| Body Large | 1.125rem (18px) | 1.6 | 400 | リード文 |
| Body | 1rem (16px) | 1.6 | 400 | 本文 |
| Body Small | 0.875rem (14px) | 1.5 | 400 | 補足テキスト |
| Caption | 0.75rem (12px) | 1.5 | 500 | タイムスタンプ、ラベル |

#### シニアモード

| レベル | サイズ | 行間 | ウェイト | 変更点 |
|--------|-------|------|---------|--------|
| Display | 3rem (48px) | 1.3 | 800 | +8px |
| H1 | 2.5rem (40px) | 1.4 | 700 | +8px |
| H2 | 2rem (32px) | 1.5 | 700 | +8px |
| H3 | 1.5rem (24px) | 1.5 | 600 | +4px |
| H4 | 1.375rem (22px) | 1.6 | 600 | +4px |
| Body Large | 1.375rem (22px) | 1.8 | 400 | +4px |
| Body | 1.25rem (20px) | 1.8 | 400 | **最小20px** |
| Body Small | 1.125rem (18px) | 1.7 | 400 | +4px |
| Caption | 1rem (16px) | 1.6 | 500 | +4px |

#### キッズモード

| レベル | サイズ | 行間 | ウェイト | 変更点 |
|--------|-------|------|---------|--------|
| Display | 2.75rem (44px) | 1.2 | 800 | +4px |
| H1 | 2.25rem (36px) | 1.3 | 700 | +4px |
| H2 | 1.75rem (28px) | 1.4 | 700 | +4px |
| H3 | 1.375rem (22px) | 1.5 | 600 | +2px |
| H4 | 1.25rem (20px) | 1.5 | 600 | +2px |
| Body Large | 1.25rem (20px) | 1.7 | 400 | +2px |
| Body | 1.125rem (18px) | 1.7 | 400 | **最小18px** |
| Body Small | 1rem (16px) | 1.6 | 400 | +2px |
| Caption | 0.875rem (14px) | 1.6 | 500 | +2px |

### 3.4 文字組みルール

- `text-wrap: balance` を見出しに適用
- `font-feature-settings: "tnum"` (tabular-nums) をスコア・数値表示に適用
- 句読点はぶら下がり禁止（行頭禁則）
- 漢字とアルファベットの間に半角スペースを挿入（自動）

---

## 4. アイコン・イラスト・キャラクター

### 4.1 アイコンシステム

| 項目 | 仕様 |
|------|------|
| ライブラリ | Lucide React |
| スタイル | Rounded (角丸) |
| サイズ | 通常 24px / シニアモード 32px / キッズモード 28px |
| ストローク幅 | 2px (通常) / 2.5px (シニアモード) |
| カラー | currentColor を使用し、テーマに追従 |

### 4.2 イラスト要素

- **スタイル**: 手描き風の温かいイラスト。完璧に整った線ではなく、わずかな揺らぎを持つ線で温もりを表現
- **色使い**: ブランドカラーパレットに準拠。多色使いは3色まで
- **トーン**: 笑顔、やさしさ、つながりを感じる表現
- **使用場面**: オンボーディング、達成画面、空状態、エラー画面、ローディング

### 4.3 マスコットキャラクター「のうかつ博士」

知恵の象徴であるフクロウをベースにしたマスコットキャラクター。

#### メインキャラクター

| 属性 | 仕様 |
|------|------|
| モチーフ | フクロウ（知恵・見守りの象徴） |
| 名前 | のうかつ博士（のうかつはかせ） |
| 性格 | 物知りでやさしい。褒め上手。失敗しても責めない |
| 表情 | 喜び、応援、考え中、驚き、うなずき、はなまる |
| 配色 | フォレストグリーン + クリーム + アクセントイエロー |

#### 世代別バリエーション

| バリエーション | 対象 | 特徴 | 口調 |
|-------------|------|------|------|
| のうかつ博士 | シニア世代 | メガネ、白衣風、落ち着いた佇まい | 丁寧語「すばらしいですね」 |
| のうかつ先生 | 親世代 | カジュアルな装い、ノートPC持ち | 親しみ語「いい調子!」 |
| のうかつくん | 子供・孫世代 | キャップ、リュック、元気なポーズ | 元気語「すっごーい!」 |

#### キャラクターの使用ガイドライン

- テスト開始前の声かけ（「今日もがんばろう!」）
- 正解時の褒め（表情が喜びに変化）
- 不正解時の励まし（「おしい! もう一度やってみよう」）表情は優しいまま
- ストリーク達成時の特別演出
- 空状態のフォロー（「まだテストしていないみたいだよ」）
- キャラクターは常にポジティブ。否定的な表現は使用禁止

---

## 5. アニメーション・モーション

### 5.1 基本方針

| 項目 | 仕様 |
|------|------|
| ライブラリ | motion/react (旧 Framer Motion) |
| インタラクション応答 | 200ms以下 |
| プロパティ制限 | Compositor props のみ（transform, opacity） |
| レイアウトアニメーション | 禁止（width, height, top, left, margin, padding） |
| `prefers-reduced-motion` | 完全対応（すべてのアニメーションを無効化） |

### 5.2 イージング関数

| 用途 | イージング | CSS値 |
|------|----------|------|
| 標準（入り） | ease-out | `cubic-bezier(0.0, 0.0, 0.2, 1.0)` |
| 標準（出） | ease-in | `cubic-bezier(0.4, 0.0, 1.0, 1.0)` |
| 強調 | spring | `type: "spring", stiffness: 300, damping: 25` |
| バウンス（達成時） | spring (bouncy) | `type: "spring", stiffness: 400, damping: 15` |

### 5.3 アニメーションカタログ

#### ページ遷移

| 遷移 | アニメーション | 持続時間 |
|------|-------------|---------|
| 前進 | スライドイン（右から） + フェード | 300ms |
| 後退 | スライドアウト（右へ） + フェード | 250ms |
| モーダル表示 | スケールアップ (0.95 -> 1.0) + フェード | 200ms |
| モーダル非表示 | スケールダウン (1.0 -> 0.95) + フェード | 150ms |

#### テスト・ゲーム内

| イベント | アニメーション | 持続時間 | 備考 |
|---------|-------------|---------|------|
| 正解 | 紙吹雪パーティクル + スケールバウンス | 600ms | 色はブランドカラーから |
| 連続正解 | 星が放射状に飛ぶ + ゴールドグロー | 800ms | 3連続以上で発動 |
| 不正解 | やさしい横揺れ (shake) | 300ms | 赤フラッシュ禁止 |
| タイムアップ | フェードアウト + キャラ応援 | 400ms | 焦りを与えない穏やかな演出 |
| スコア表示 | カウントアップアニメーション | 1200ms | 数字がゼロから加算 |
| レベルアップ | スケールアップ + 光の演出 | 1000ms | 達成感を強調 |

#### キャラクターアニメーション

| 動き | アニメーション | 持続時間 | ループ |
|------|-------------|---------|-------|
| 待機 | まばたき (scale-y: 1 -> 0.1 -> 1) | 150ms | 3-5秒間隔 |
| うなずき | rotate (0 -> -5deg -> 5deg -> 0) | 400ms | 褒め時に1回 |
| ジャンプ | translate-y (0 -> -12px -> 0) | 350ms | 達成時に2回 |
| 手振り | rotate arm (0 -> 15deg -> -15deg -> 0) | 500ms | 挨拶時 |

### 5.4 モード別アニメーション強度

| モード | 強度 | 紙吹雪 | キャラ動き | ページ遷移 |
|--------|------|--------|----------|-----------|
| 通常モード | 100% | あり | あり | スライド+フェード |
| シニアモード | 30% | 控えめ（粒少） | 最小限（まばたきのみ） | フェードのみ |
| キッズモード | 150% | 派手（粒多+大きい） | 大きな動き | スライド+バウンス |
| reduced-motion | 0% | なし | なし | 即時切替 |

---

## 6. レイアウト・スペーシング

### 6.1 レスポンシブ基本方針

- **モバイルファースト**
- 主要ターゲット: スマートフォン（シニアのメインデバイス）
- タブレット・デスクトップはプログレッシブエンハンスメント

### 6.2 ブレークポイント

| トークン | 幅 | 対象デバイス |
|---------|-----|------------|
| `sm` | 640px | 大型スマートフォン |
| `md` | 768px | タブレット（縦） |
| `lg` | 1024px | タブレット（横）/ 小型PC |
| `xl` | 1280px | デスクトップ |
| `2xl` | 1536px | 大型デスクトップ |

### 6.3 スペーシングスケール

8px グリッドシステムを基本とする。

| トークン | 値 | 用途 |
|---------|-----|------|
| `space-0` | 0px | - |
| `space-1` | 4px | アイコンとテキストの間 |
| `space-2` | 8px | インライン要素間 |
| `space-3` | 12px | 密接な要素間 |
| `space-4` | 16px | カード内パディング |
| `space-5` | 20px | セクション内要素間 |
| `space-6` | 24px | カード間、セクション区切り |
| `space-8` | 32px | セクション間 |
| `space-10` | 40px | 大きなセクション間 |
| `space-12` | 48px | ページセクション間 |
| `space-16` | 64px | ヒーローセクション周辺 |

### 6.4 タッチターゲット

| モード | 最小サイズ | 推奨サイズ | タップ間隔 |
|--------|----------|----------|----------|
| 通常モード | 44px | 48px | 8px以上 |
| シニアモード | 48px | 56px | 12px以上 |
| キッズモード | 48px | 52px | 8px以上 |

### 6.5 角丸 (Border Radius)

| トークン | 値 | 用途 |
|---------|-----|------|
| `radius-none` | 0px | - |
| `radius-sm` | 8px | 小さなバッジ、チップ |
| `radius-md` | 12px | ボタン、入力フィールド |
| `radius-lg` | 16px | カード |
| `radius-xl` | 20px | 大きなカード、モーダル |
| `radius-2xl` | 24px | フローティングパネル |
| `radius-full` | 9999px | アバター、丸ボタン |

> **方針**: 角丸は大きめに設定し、温かみと親しみやすさを表現する。

### 6.6 シャドウ

| トークン | 値 | 用途 |
|---------|-----|------|
| `shadow-sm` | `0 1px 3px rgba(44, 62, 45, 0.06)` | ボタン、チップ |
| `shadow-md` | `0 4px 8px rgba(44, 62, 45, 0.08)` | カード（通常） |
| `shadow-lg` | `0 8px 16px rgba(44, 62, 45, 0.10)` | カード（浮き上がり） |
| `shadow-xl` | `0 16px 32px rgba(44, 62, 45, 0.12)` | モーダル、ドロップダウン |

> **注意**: 影の色はグリーン系の `rgba(44, 62, 45, ...)` を使用し、温かみを維持する。黒い影 (`rgba(0, 0, 0, ...)`) は冷たい印象になるため避ける。過剰なドロップシャドウは禁止。

### 6.7 レイアウトパターン

| パターン | 用途 | 構造 |
|---------|------|------|
| シングルカラム | モバイルメイン | 1カラム、上下スクロール |
| カードグリッド | ゲーム選択、家族一覧 | 2-3列グリッド（レスポンシブ） |
| タブ+コンテンツ | デイリースコア、履歴 | 上部タブ + 下部コンテンツ |
| スプリット | 比較画面（タブレット以上） | 2カラム均等分割 |
| ボトムシート | 詳細情報、設定 | オーバーレイ+ボトムアップ |

### 6.8 ビューポート高さ

- `h-dvh` (Dynamic Viewport Height) を使用
- `h-screen` は使用禁止（iOS Safari の アドレスバーで問題が発生するため）

### 6.9 z-index 管理

| レイヤー | z-index | 用途 |
|---------|---------|------|
| Base | 0 | 通常コンテンツ |
| Elevated | 10 | フローティングボタン |
| Sticky | 20 | ヘッダー、ナビゲーション |
| Dropdown | 30 | ドロップダウンメニュー |
| Modal backdrop | 40 | モーダル背景 |
| Modal | 50 | モーダル本体 |
| Toast | 60 | トースト通知 |
| Tooltip | 70 | ツールチップ |

---

## 7. UIモード（3世代対応）

### 7.1 モード切替の仕組み

```
プロフィール登録時
    │
    ├── 年齢 60歳以上 → シニアモード（自動）
    ├── 年齢 13-59歳 → 標準モード（自動）
    └── 年齢 5-12歳 → キッズモード（自動）
    │
    └── 設定画面から手動切替も可能
```

### 7.2 シニアモード

**原則**: 1画面1アクション。迷わせない。

| 項目 | 仕様 |
|------|------|
| フォントサイズ | 最小20px、推奨22px |
| 行間 | 1.8 |
| ボタンサイズ | 最小高さ 56px |
| タッチターゲット | 56px以上 |
| 1画面の情報量 | 最大3アクション |
| ナビゲーション | 大きなアイコン + テキストラベル（常に表示） |
| 入力 | キーボード自動フォーカス、入力補助表示 |
| 確認 | 重要操作は2ステップ確認 |
| アニメーション | 控えめ（フェードのみ） |
| コントラスト | 7:1以上 |
| カラー | 高コントラストパレット使用 |
| 音声 | 読み上げ対応 (aria-live) |

### 7.3 標準モード

**原則**: バランスの取れた情報密度とビジュアル。

| 項目 | 仕様 |
|------|------|
| フォントサイズ | 最小16px |
| 行間 | 1.6 |
| ボタンサイズ | 最小高さ 44px |
| タッチターゲット | 48px以上 |
| ナビゲーション | アイコン + テキスト（モバイルはアイコンのみ可） |
| アニメーション | フル（100%） |
| コントラスト | 4.5:1以上 |

### 7.4 キッズモード

**原則**: カラフルで楽しく、遊び心満載。

| 項目 | 仕様 |
|------|------|
| フォントサイズ | 最小18px |
| 行間 | 1.7 |
| ボタンサイズ | 最小高さ 48px |
| タッチターゲット | 52px以上 |
| カラー | 彩度高めのパレット |
| イラスト | 多め。キャラクター「のうかつくん」が常駐 |
| ナビゲーション | 大きなアイコン + ひらがなラベル |
| アニメーション | 派手め（150%）。達成時の演出を強化 |
| ゲーミフィケーション | バッジ、スター、レベルアップ演出を強化 |
| テキスト | ふりがな対応（小学生以下） |

### 7.5 モード共通ルール

| ルール | 説明 |
|--------|------|
| 情報の一貫性 | モードが変わっても表示される情報の内容は同じ |
| 段階的開示 | 複雑な情報は「もっと見る」で展開 |
| 戻りやすさ | 常に「戻る」動線を明確に |
| エラー回復 | 取り消し(Undo)を常に提供 |
| 進捗の永続性 | モード切替してもデータ・進捗は保持 |

---

## 8. コンポーネント方針

### 8.1 技術スタック

| 技術 | バージョン | 用途 |
|------|----------|------|
| shadcn/ui | latest | UIコンポーネントベース |
| Tailwind CSS | v4 | スタイリング |
| motion/react | latest | アニメーション |
| Lucide React | latest | アイコン |
| Recharts | latest | グラフ・チャート |

### 8.2 ユーティリティ

```typescript
// cn utility (clsx + tailwind-merge)
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

### 8.3 CSS Custom Properties によるテーマ管理

```css
:root {
  /* ブランドカラー */
  --color-primary: 61 139 95;         /* #3D8B5F */
  --color-secondary: 232 132 92;      /* #E8845C */
  --color-accent: 242 201 76;         /* #F2C94C */

  /* 背景 */
  --color-background: 251 248 243;    /* #FBF8F3 */
  --color-surface: 255 255 255;       /* #FFFFFF */

  /* テキスト */
  --color-text-primary: 44 62 45;     /* #2C3E2D */
  --color-text-secondary: 107 124 108; /* #6B7C6C */

  /* セマンティック */
  --color-success: 91 169 123;        /* #5BA97B */
  --color-warning: 232 168 92;        /* #E8A85C */
  --color-info: 91 157 213;           /* #5B9BD5 */
  --color-danger: 232 132 92;         /* #E8845C */

  /* ボーダー・シャドウ */
  --radius-md: 12px;
  --radius-lg: 16px;
}

.dark {
  --color-background: 26 35 50;      /* #1A2332 */
  --color-surface: 42 63 85;         /* #2A3F55 */
  --color-text-primary: 240 237 230; /* #F0EDE6 */
  --color-text-secondary: 168 184 200; /* #A8B8C8 */
  --color-success: 109 191 139;      /* #6DBF8B */
  --color-warning: 240 184 108;      /* #F0B86C */
  --color-info: 108 170 224;         /* #6CAAE0 */
  --color-danger: 240 144 112;       /* #F09070 */
}
```

### 8.4 コンポーネントカスタマイズ方針

shadcn/ui コンポーネントをベースに以下のカスタマイズを適用する。

| コンポーネント | カスタマイズ | 理由 |
|-------------|-----------|------|
| Button | 角丸拡大 (12px)、高さ拡大 (48-56px) | タッチしやすく |
| Card | 角丸拡大 (16px)、影を緑系に | 温かみ |
| Input | 角丸 (12px)、高さ拡大 (48px)、ボーダー太め | 視認性 |
| Dialog | 角丸拡大 (20px)、オーバーレイ薄め | 圧迫感軽減 |
| Toast | 角丸 (16px)、左にアイコン、右に閉じるボタン | わかりやすく |
| Avatar | 角丸 full、ボーダー (世代カラー) | 世代識別 |
| Badge | 角丸 full、パディング増 | 読みやすく |
| Tabs | 大きめタブ、アクティブ時に下線ではなく背景色変更 | シニアにわかりやすく |
| Progress | 角丸 full、高さ12px、アニメーション付き | 楽しい進捗表示 |

### 8.5 ボタンバリアント

| バリアント | 用途 | スタイル |
|----------|------|---------|
| primary | メインアクション | 緑背景 + 白文字 |
| secondary | サブアクション | コーラル背景 + 白文字 |
| accent | 達成・特別アクション | イエロー背景 + ダークテキスト |
| outline | 控えめなアクション | 枠線 + テキスト色 |
| ghost | ナビゲーション、テキストリンク | 背景なし + テキスト色 |
| destructive | 削除（使用を最小限に） | コーラル系（赤禁止） |

---

## 9. グラフ・チャート

### 9.1 基本方針

| 項目 | 仕様 |
|------|------|
| ライブラリ | Recharts |
| 配色 | ブランドカラーパレットから |
| 角丸 | 棒グラフの角を丸める (radius: 8px) |
| アニメーション | フェードイン + スケールアップ |
| ツールチップ | カスタムデザイン（カード風、角丸） |
| レスポンシブ | ResponsiveContainer で100%幅対応 |

### 9.2 グラフ種別

| グラフ | 用途 | データ | デザインポイント |
|--------|------|--------|---------------|
| 折れ線グラフ | スコア推移（日別/週別/月別） | 認知機能スコア経時変化 | 太い線 (3px)、丸いドット (6px)、エリアグラデーション |
| レーダーチャート | 5領域バランス | 記憶力/注意力/言語力/計算力/空間認識 | 5角形、塗りつぶし (opacity: 0.2)、太い線 |
| 棒グラフ | 家族比較、日別比較 | 家族メンバーのスコア比較 | 角丸棒 (8px)、世代カラー使用 |
| ドーナツチャート | 達成率、カテゴリ比率 | テスト完了率、正答率 | 太い円弧 (30px)、中央にスコア表示 |
| カレンダーヒートマップ | 継続状況 | 毎日のテスト実施状況 | 緑のグラデーション(GitHub風) |

### 9.3 シニア向けグラフ調整

| 調整項目 | 通常モード | シニアモード |
|---------|----------|-----------|
| 線の太さ | 2-3px | 4-5px |
| ドットサイズ | 4-6px | 8-10px |
| ラベルサイズ | 12px | 16px |
| 軸ラベルサイズ | 12px | 16px |
| 凡例サイズ | 14px | 18px |
| ツールチップ | ホバー | タップ（ホバーなしのため） |
| データポイント数 | 最大30点 | 最大7点（1週間分） |
| グリッド線 | 薄い | 濃いめ |

---

## 10. アクセシビリティ

### 10.1 基本方針

| 項目 | 基準 |
|------|------|
| 準拠レベル | WCAG 2.1 AA |
| シニアモード | WCAG 2.1 AAA に準じた高コントラスト |
| スクリーンリーダー | VoiceOver (iOS) / TalkBack (Android) 完全対応 |
| キーボード操作 | すべての機能がキーボードで操作可能 |
| フォーカス管理 | 視認性の高いフォーカスリング (3px, primary color) |

### 10.2 ARIA 実装ガイドライン

| 要素 | 必須属性 | 備考 |
|------|---------|------|
| ボタン | `aria-label`（アイコンのみの場合） | テキスト付きボタンは不要 |
| 画像 | `alt` | 装飾画像は `alt=""` + `aria-hidden="true"` |
| フォーム | `aria-label` or `<label>` | 必ずラベルを紐づけ |
| ライブ更新 | `aria-live="polite"` | スコア更新、タイマー |
| モーダル | `role="dialog"`, `aria-modal="true"` | フォーカストラップ必須 |
| タブ | `role="tablist"`, `role="tab"`, `role="tabpanel"` | キーボードナビゲーション |
| プログレス | `role="progressbar"`, `aria-valuenow` | スクリーンリーダー対応 |
| グラフ | `aria-label` + テキスト代替テーブル | グラフの内容をテキストで提供 |

### 10.3 カラーだけに依存しない情報伝達

- 成功/エラーはアイコン + テキスト + 色の3要素で伝達
- グラフの凡例はパターン (破線, 点線, 実線) も併用
- フォームバリデーションはインラインメッセージで表示

### 10.4 動的コンテンツ

- `aria-live="polite"`: スコア更新、通知
- `aria-live="assertive"`: エラーメッセージ、タイムアウト警告
- ページ遷移時に `document.title` を更新
- フォーカス管理: モーダルオープン時にフォーカストラップ

---

## 11. 品質基準

### 11.1 Lighthouse スコア

| カテゴリ | 目標スコア | 最低許容値 |
|---------|-----------|-----------|
| Performance | 90+ | 85 |
| Accessibility | 100 | 95 |
| Best Practices | 100 | 95 |
| SEO | 100 | 95 |

### 11.2 Core Web Vitals

| 指標 | 目標値 | 備考 |
|------|--------|------|
| FCP (First Contentful Paint) | < 1.8s | キャラクター画像の遅延読み込み |
| LCP (Largest Contentful Paint) | < 2.5s | 重要画像のプリロード |
| CLS (Cumulative Layout Shift) | < 0.1 | フォント読み込みによるシフト防止 |
| INP (Interaction to Next Paint) | < 200ms | タップ・スワイプの即時応答 |

### 11.3 パフォーマンス最適化

| 項目 | 方針 |
|------|------|
| フォント | `font-display: swap` + サブセット化 |
| 画像 | WebP/AVIF、srcset による最適サイズ配信 |
| キャラクター画像 | SVG（アニメーション対応）またはLottie |
| CSS | Tailwind のパージ、未使用クラス除去 |
| JS | コード分割、遅延読み込み |
| `blur()` | 10px以下に制限（GPU負荷軽減） |
| `will-change` | アニメーション直前にのみ付与、常時設定禁止 |
| `backdrop-filter` | 使用最小限（シニアデバイスのGPU負荷考慮） |

---

## 12. 禁止パターン（Anti-Patterns）

以下のパターンはデザイン・実装において**絶対に使用しない**。

### 12.1 フォント

| 禁止 | 理由 |
|------|------|
| Inter | AI生成コードの典型パターン（AI slop） |
| Roboto | AI生成コードの典型パターン（AI slop） |
| Arial | 没個性、温かみがない |
| 極細ウェイト (100-200) | シニアが読めない |

### 12.2 カラー

| 禁止 | 理由 |
|------|------|
| 紫グラデーション on 白背景 | AI生成デザインの典型（AI slop） |
| 純粋な赤 (#FF0000系) | シニアに不安・恐怖を与える |
| 真っ黒 (#000000) 背景 | 冷たく威圧的 |
| ネオンカラー | 目に優しくない |
| 虹色グラデーション | 品がない |

### 12.3 レイアウト・エフェクト

| 禁止 | 理由 |
|------|------|
| 過剰なドロップシャドウ | AI slop |
| グロー効果 | AI slop |
| パララックススクロール | シニアに酔いを与える |
| 無限スクロール | シニアが現在位置を見失う |
| 自動カルーセル | 操作が追いつかない |
| 小さすぎるボタン (< 44px) | タッチミスの原因 |
| テキストの画像化 | アクセシビリティ違反 |

### 12.4 アニメーション

| 禁止 | 理由 |
|------|------|
| フラッシュ/点滅 (3Hz以上) | 光過敏性発作のリスク |
| 急激な色変化 | 不安を与える |
| レイアウトプロパティのアニメーション | パフォーマンス劣化 |
| 5秒以上の連続アニメーション | CPU/バッテリー消費 |

### 12.5 コンテンツ

| 禁止 | 理由 |
|------|------|
| 否定的な表現（「間違い」「失敗」「ダメ」） | ユーザーの意欲を削ぐ |
| 医療用語の直接使用 | 不安を煽る |
| 複雑な数値の羅列 | シニアに理解しづらい |
| 英語のみの表記 | 日本語ネイティブユーザー向け |

---

## 付録

### A. CSS Custom Properties 一覧

Phase 2 `/design-system` コマンドで `design-system.yml` に展開する際の参照用。

```yaml
# design-system.yml に展開する際のマッピング
version: "1.0.0"
source: "docs/requirements/design-requirements.md"

aesthetic:
  direction: warm-friendly
  mood: bright-calm
  differentiation: "医療っぽくない楽しい健康アプリ。ゲーム感覚の楽しさと医学的信頼性の両立"

colors:
  primary: "#3D8B5F"
  secondary: "#E8845C"
  accent: "#F2C94C"
  success: "#5BA97B"
  warning: "#E8A85C"
  info: "#5B9BD5"
  danger: "#E8845C"
  background:
    light: "#FBF8F3"
    dark: "#1A2332"
  text:
    primary: "#2C3E2D"
    secondary: "#6B7C6C"

typography:
  heading:
    family: "Zen Maru Gothic"
    fallback: "Hiragino Maru Gothic ProN, sans-serif"
    weights: [600, 700, 800]
  body:
    family: "Noto Sans JP"
    fallback: "Hiragino Kaku Gothic ProN, sans-serif"
    weights: [400, 500]

components:
  library: "shadcn/ui"
  styling: "tailwind"
  animation: "motion/react"
  icons: "lucide-react"
  charts: "recharts"

responsive:
  mobile_first: true
  breakpoints:
    sm: "640px"
    md: "768px"
    lg: "1024px"
    xl: "1280px"
    2xl: "1536px"

quality:
  lighthouse:
    performance: 90
    accessibility: 100
    best_practices: 100
    seo: 100
  wcag_level: "AA"
  dark_mode: true
```

### B. モード別比較表

| 項目 | シニアモード | 標準モード | キッズモード |
|------|-----------|----------|-----------|
| 最小フォント | 20px | 16px | 18px |
| 行間 | 1.8 | 1.6 | 1.7 |
| ボタン高さ | 56px | 44px | 48px |
| タッチターゲット | 56px | 48px | 52px |
| コントラスト比 | 7:1 | 4.5:1 | 4.5:1 |
| アニメーション | 30% | 100% | 150% |
| 1画面情報量 | 最小 | 標準 | 標準 |
| キャラクター | のうかつ博士 | のうかつ先生 | のうかつくん |
| ナビラベル | 常に表示 | レスポンシブ | ひらがな |
| ふりがな | なし | なし | あり |

### C. 参照ドキュメント

- [機能要件書](./requirements.md)
- [非機能要件書](./non-functional.md)
- Phase 2 出力: `docs/design/design-system.yml`
- Phase 2 出力: `docs/design/ui-guidelines.md`

---

*CCAGI SDK Phase 1 - デザイン要件書 v1.0.0*
